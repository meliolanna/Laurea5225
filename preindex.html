<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laurea Anna 5225</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    <script defer src="script.js"></script>
</head>
<body>
    <h1>Inserisci il tuo nome</h1>
    <input type="text" id="nameInput" placeholder="Il tuo nome">
    <button id="submitName">Invia</button>
    <p id="result"></p>

    <script>
	    // Dizionario con le dediche
        const dediche = {
            "Marco": "Congratulazioni per la laurea, Marco! 🎉",
            "Anna": "Bravissima Anna! Sei stata fantastica! 😊",
            "Luca": "Luca, hai fatto un lavoro incredibile! 👏"
        };

        function cercaDedica() {
            const name = document.getElementById("nameInput").value.trim();
            if (!name) {
                alert("Inserisci un nome!");
                return;
            }

            // Controlla se il nome esiste nella mappa
            let message;
            if (dediche[name]) {
                message = dediche[name];
            } else {
                message = `Grazie ${name}! 🎊`;
                dediche[name] = message; // Aggiunge il nome alla mappa (ma non è salvato dopo il refresh)
            }

            alert(message); // Mostra la dedica in un pop-up
        }
        /*// Configura Firebase (sostituisci con le tue credenziali)
        // Import the functions you need from the SDKs you need
		import { initializeApp } from "firebase/app";
		import { getAnalytics } from "firebase/analytics";
		// TODO: Add SDKs for Firebase products that you want to use
		// https://firebase.google.com/docs/web/setup#available-libraries

		// Your web app's Firebase configuration
		// For Firebase JS SDK v7.20.0 and later, measurementId is optional
		const firebaseConfig = {
		  apiKey: "AIzaSyC2X6PoVjkZUZ3BUv_0aF4k1-0jiZw_2Zs",
		  authDomain: "laurea-dd6b5.firebaseapp.com",
		  projectId: "laurea-dd6b5",
		  storageBucket: "laurea-dd6b5.firebasestorage.app",
		  messagingSenderId: "681091736477",
		  appId: "1:681091736477:web:cbec6c156cdb889b878574",
		  measurementId: "G-GKHYV4RPN0"
		};

		// Initialize Firebase
		// const app = initializeApp(firebaseConfig);
		// const analytics = getAnalytics(app);

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Funzione per gestire l'inserimento del nome
        document.getElementById("submitName").addEventListener("click", async () => {
            const name = document.getElementById("nameInput").value.trim();
            if (!name) return alert("Inserisci un nome!");

            const docRef = db.collection("dediche").doc(name);
            const doc = await docRef.get();

            let message;
            if (doc.exists) {
                message = doc.data().message;
            } else {
                message = `Grazie ${name}!`;
                await docRef.set({ message });
            }

            // Mostra la dedica in una nuova finestra
            const newWindow = window.open("", "_blank", "width=400,height=300");
            newWindow.document.write(`<h2>Dedica per ${name}</h2><p>${message}</p>`);
        });*/
    </script>
</body>
</html>
